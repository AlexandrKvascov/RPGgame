{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{getPlayer,loadPlayer}from'./api';import\"./styles/StartStyle.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const StartPage=()=>{const[name,setName]=useState('');const[loadCharacter,setLoadCharacter]=useState(false);const[characters,setCharacters]=useState([]);const navigate=useNavigate();const handleNewGame=async()=>{setLoadCharacter(false);};const handleLoad=async()=>{setLoadCharacter(true);const userId=JSON.parse(localStorage.getItem('userId'));const response=await loadPlayer(userId);setCharacters(response);};const handleStart=async()=>{if(loadCharacter){// выбрать персонажа из списка\nconst character=characters.find(character=>character.Name===name);localStorage.setItem('playerId',JSON.stringify(character.Id));if(character){// перейти на страницу GamePage с выбранным персонажем\nnavigate('/game');}else{alert('Персонаж не найден');}}else{// создать нового персонажа\nconst userId=JSON.parse(localStorage.getItem('userId'));const playerid=await getPlayer(name,userId);localStorage.setItem('playerId',JSON.stringify(playerid));navigate('/game');// Переход на страницу GamePage\n}};return/*#__PURE__*/_jsx(\"body\",{className:\"StartPage\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"StartButton\",onClick:handleNewGame,children:\"\\u041D\\u043E\\u0432\\u0430\\u044F \\u0438\\u0433\\u0440\\u0430\"}),/*#__PURE__*/_jsx(\"button\",{className:\"StartButton\",onClick:handleLoad,children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C\"}),loadCharacter?/*#__PURE__*/_jsxs(\"div\",{className:\"loadPerson\",children:[/*#__PURE__*/_jsx(\"ul\",{children:characters.map(character=>/*#__PURE__*/_jsxs(\"li\",{className:\"menu-item\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"InputPerson\",type:\"checkbox\",checked:name===character.Name,onChange:()=>setName(character.Name)}),/*#__PURE__*/_jsx(\"span\",{children:character.Name})]},character.Id))}),/*#__PURE__*/_jsx(\"button\",{className:\"StartButton\",onClick:handleStart,children:\"\\u0421\\u0442\\u0430\\u0440\\u0442\"})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"NameInpGroup\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"InputPerson\",type:\"text\",value:name,onChange:e=>setName(e.target.value),placeholder:\" \"}),/*#__PURE__*/_jsx(\"label\",{children:\"Name\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"StartButton\",onClick:handleStart,children:\"\\u0421\\u0442\\u0430\\u0440\\u0442\"})]})]})});};export default StartPage;","map":{"version":3,"names":["React","useState","useNavigate","getPlayer","loadPlayer","jsx","_jsx","jsxs","_jsxs","StartPage","name","setName","loadCharacter","setLoadCharacter","characters","setCharacters","navigate","handleNewGame","handleLoad","userId","JSON","parse","localStorage","getItem","response","handleStart","character","find","Name","setItem","stringify","Id","alert","playerid","className","children","onClick","map","type","checked","onChange","value","e","target","placeholder"],"sources":["C:/Projects/RPGgame/RPGgame/FrontGame/my-game/src/StartPage.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { getPlayer, loadPlayer } from './api';\r\nimport \"./styles/StartStyle.css\"\r\nconst StartPage = () => {\r\n  const [name, setName] = useState('');\r\n  const [loadCharacter, setLoadCharacter] = useState(false);\r\n  const [characters, setCharacters] = useState([]);\r\n  const navigate = useNavigate();\r\n\r\n  const handleNewGame = async () => {\r\n    setLoadCharacter(false);\r\n  };\r\n\r\n  const handleLoad = async () => {\r\n    setLoadCharacter(true);\r\n    const userId = JSON.parse(localStorage.getItem('userId'))\r\n    const response = await loadPlayer(userId);\r\n    setCharacters(response);\r\n  };\r\n\r\n  const handleStart = async () => {\r\n    if (loadCharacter) {\r\n      // выбрать персонажа из списка\r\n\r\n      const character = characters.find((character) => character.Name === name);\r\n      localStorage.setItem('playerId', JSON.stringify(character.Id))\r\n\r\n      if (character) {\r\n        // перейти на страницу GamePage с выбранным персонажем\r\n        navigate('/game');\r\n      } else {\r\n        alert('Персонаж не найден');\r\n      }\r\n    } else {\r\n      // создать нового персонажа\r\n      const userId = JSON.parse(localStorage.getItem('userId'))\r\n      const playerid = await getPlayer(name, userId);\r\n      localStorage.setItem('playerId', JSON.stringify(playerid))\r\n      navigate('/game'); // Переход на страницу GamePage\r\n    }\r\n  };\r\n\r\n  return (\r\n    <body className='StartPage'>\r\n    <div>\r\n      <button className= \"StartButton\"  onClick={handleNewGame}>Новая игра</button>\r\n      <button className= \"StartButton\"  onClick={handleLoad}>Загрузить</button>\r\n      \r\n  {loadCharacter ? (\r\n    <div className='loadPerson'>\r\n    <ul>\r\n      {characters.map((character) => (\r\n        <li className='menu-item' key={character.Id}>\r\n          <input\r\n          className='InputPerson'\r\n            type=\"checkbox\"\r\n            checked={name === character.Name}\r\n            onChange={() => setName(character.Name)}\r\n          />\r\n          <span>{character.Name}</span>\r\n        </li>\r\n      ))}\r\n    </ul>\r\n          <button className= \"StartButton\" onClick={handleStart}>Старт</button></div>\r\n  ) : (\r\n    <div>\r\n      <div className='NameInpGroup'>\r\n\r\n    <input\r\n    className=\"InputPerson\"\r\n      type=\"text\"\r\n      value={name}\r\n      onChange={(e) => setName(e.target.value)}\r\n      placeholder=\" \"\r\n    />\r\n    <label>Name</label>\r\n      </div>\r\n    <button className= \"StartButton\" onClick={handleStart}>Старт</button>\r\n    </div>\r\n \r\n    \r\n  )}\r\n</div>\r\n</body>\r\n  );\r\n};\r\n\r\nexport default StartPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}