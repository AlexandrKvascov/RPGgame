{"ast":null,"code":"import React,{useState}from\"react\";import{useLocation,useNavigate}from\"react-router-dom\";import{SetExp,setStartBattle}from\"./api.js\";import{EnemyPunch,PlayerPunch}from\"./AnimationPuch.js\";import KnightImage from\"./image/KnightState.gif\";import OgreImage from\"./image/OgreState.gif\";import'./styles/BattlePage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BattlePage=()=>{const location=useLocation();const navigate=useNavigate();const[hp,setHp]=useState(location.state.Hp);const[enemyHp,setEnemyHp]=useState(location.state.enemyHp);const[damage,setDamage]=useState(location.state.damage);const[enemyDamage,setEnemyDamage]=useState(location.state.enemyDamge);const[showPlayerPunch,setShowPlayerPunch]=useState(false);const[showEnemyPunch,setShowEnemyPunch]=useState(false);const startBattle=async()=>{const response=await setStartBattle(\"battle\");const battleResult=response;let Myhp=hp;let enemyhp=enemyHp;if(battleResult>10){enemyhp=enemyHp-damage;setShowPlayerPunch(true);setTimeout(()=>setShowPlayerPunch(false),1000);setEnemyHp(enemyHp-damage);}else{Myhp=hp-enemyDamage;setShowEnemyPunch(true);setTimeout(()=>setShowEnemyPunch(false),1000);setHp(hp-enemyDamage);}if(enemyhp<=0){await setStartBattle(\"win\");const playerId=JSON.parse(localStorage.getItem('playerId'));const lvl=await SetExp(location.state.EnemyId,location.state.MeId,location.state.exp,playerId);localStorage.getItem(\"direction\",JSON.stringify(lvl));}else if(Myhp<=0){await setStartBattle(\"lose\");}};return/*#__PURE__*/_jsx(\"body\",{className:\"BattlePage\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Battle Page\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"BattleStats\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Player HP: \",hp]}),/*#__PURE__*/_jsx(\"div\",{className:\"hp-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"hp-bar-fill\",style:{width:`${hp/100*100}%`}})}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Enemy HP: \",enemyHp]}),/*#__PURE__*/_jsx(\"div\",{className:\"hp-bar\",children:/*#__PURE__*/_jsx(\"div\",{className:\"hp-bar-fill\",style:{width:`${enemyHp/100*100}%`}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"BattleImages\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Battle State: \"}),!showPlayerPunch&&!showEnemyPunch&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"img\",{src:KnightImage,alt:\"Knight\"}),/*#__PURE__*/_jsx(\"img\",{src:OgreImage})]}),showPlayerPunch&&/*#__PURE__*/_jsx(PlayerPunch,{}),showEnemyPunch&&/*#__PURE__*/_jsx(EnemyPunch,{}),hp<=0||enemyHp<=0?/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/game\",{replace:true}),children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"}):/*#__PURE__*/_jsx(\"button\",{onClick:startBattle,children:\"\\u041F\\u0440\\u043E\\u0434\\u043E\\u043B\\u0436\\u0438\\u0442\\u044C \\u0431\\u0438\\u0442\\u0432\\u0443\"})]})]})});};export default BattlePage;","map":{"version":3,"names":["React","useState","useLocation","useNavigate","SetExp","setStartBattle","EnemyPunch","PlayerPunch","KnightImage","OgreImage","jsx","_jsx","jsxs","_jsxs","BattlePage","location","navigate","hp","setHp","state","Hp","enemyHp","setEnemyHp","damage","setDamage","enemyDamage","setEnemyDamage","enemyDamge","showPlayerPunch","setShowPlayerPunch","showEnemyPunch","setShowEnemyPunch","startBattle","response","battleResult","Myhp","enemyhp","setTimeout","playerId","JSON","parse","localStorage","getItem","lvl","EnemyId","MeId","exp","stringify","className","children","style","width","src","alt","onClick","replace"],"sources":["C:/Projects/RPGgame/RPGgame/FrontGame/my-game/src/BattlePage.js"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport { SetExp, setStartBattle } from \"./api.js\";\r\nimport { EnemyPunch, PlayerPunch } from \"./AnimationPuch.js\";\r\n\r\nimport KnightImage from \"./image/KnightState.gif\"\r\nimport OgreImage from \"./image/OgreState.gif\"\r\nimport './styles/BattlePage.css'\r\nconst BattlePage = () => {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const [hp, setHp] = useState(location.state.Hp);\r\n  const [enemyHp, setEnemyHp] = useState(location.state.enemyHp);\r\n  const [damage, setDamage] = useState(location.state.damage);\r\n  const [enemyDamage, setEnemyDamage] = useState(location.state.enemyDamge);\r\n  const [showPlayerPunch, setShowPlayerPunch] = useState(false);\r\n  const [showEnemyPunch, setShowEnemyPunch] = useState(false);\r\n\r\n  const startBattle = async () => {\r\n    const response = await setStartBattle(\"battle\");\r\n    const battleResult = response;\r\n \r\n    let Myhp = hp;\r\n    let enemyhp = enemyHp;\r\n\r\n    if (battleResult > 10) {\r\n      enemyhp = enemyHp - damage;\r\n      setShowPlayerPunch(true);\r\n      setTimeout(() => setShowPlayerPunch(false), 1000);\r\n      setEnemyHp(enemyHp - damage);\r\n    } else {\r\n      Myhp = hp - enemyDamage;\r\n      setShowEnemyPunch(true);\r\n      setTimeout(() => setShowEnemyPunch(false), 1000);\r\n      setHp(hp - enemyDamage);\r\n    }\r\n\r\n\r\n    if (enemyhp <= 0) {\r\n      await setStartBattle(\"win\");\r\n      const playerId = JSON.parse(localStorage.getItem('playerId'))\r\n      const lvl = await SetExp(location.state.EnemyId, location.state.MeId, location.state.exp, playerId)\r\n      localStorage.getItem(\"direction\", JSON.stringify(lvl))\r\n    } else if (Myhp <= 0) {\r\n      await setStartBattle(\"lose\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <body className=\"BattlePage\">\r\n\r\n    <div>\r\n      <h2>Battle Page</h2>\r\n      <div className=\"BattleStats\">\r\n      <p>Player HP: {hp}</p>\r\n      <div className=\"hp-bar\">\r\n      <div className=\"hp-bar-fill\" style={{ width: `${(hp / 100) * 100}%` }}></div>\r\n      </div>\r\n      \r\n      <p>Enemy HP: {enemyHp}</p>\r\n      <div className=\"hp-bar\">\r\n      <div className=\"hp-bar-fill\" style={{ width: `${(enemyHp / 100) * 100}%` }}></div>\r\n      </div>\r\n      </div>\r\n      <div className=\"BattleImages\">\r\n\r\n      <p>Battle State: </p>\r\n      {!showPlayerPunch &&!showEnemyPunch && (\r\n        <div>\r\n        <img src={KnightImage} alt=\"Knight\" />\r\n      <img src={OgreImage}  />\r\n      </div>\r\n        )}\r\n      {showPlayerPunch && <PlayerPunch />}\r\n    \r\n      {showEnemyPunch && <EnemyPunch />}\r\n      {hp <= 0 || enemyHp <= 0 ? (\r\n        <button onClick={() => navigate(\"/game\", { replace: true })}>\r\n          Назад\r\n        </button>\r\n      ) : (\r\n        <button onClick={startBattle}>Продолжить битву</button>\r\n      )}\r\n      </div>\r\n    </div>\r\n    </body>\r\n  );\r\n};\r\n\r\nexport default BattlePage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}